---

- include_tasks: pre-install.yml

- include_tasks: repo-debian.yml
  when: ansible_os_family == 'Debian'

- include_tasks: repo-redhat.yml
  when: ansible_os_family == 'RedHat'

- include_tasks: docker-slirp4netns.yml
  when: ansible_distribution_release == 'bionic'

- include_tasks: docker-fuse-overlayfs.yml
  when: ansible_distribution_release == 'bionic'

- include_tasks: install.yml

- include_tasks: docker-rootless.yml
  when: docker_rootless_install | bool and docker_users_list is defined

- include_tasks: docker-buildx.yml
  when: docker_buildx_install | bool

- include_tasks: docker-compose.yml
  when: docker_compose_install | bool
